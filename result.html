<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ケバブケースゲーム</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-200 relative min-h-screen w-screen">

  <!-- ヘッダー -->
  <header class="bg-amber-300/80 w-full shadow-md p-1 sticky top-0 z-20">
    <h1 class="text-center text-lg m-2">ゲーム結果</h1>
  </header>

  <!-- 背景画像と中央テキスト -->
  <main class="flex justify-center items-center min-h-[calc(100vh-100px)] relative z-10 px-4">
    <div class="relative w-full max-w-[90vw] max-h-[90vh] p-4">
      <!-- 正方形コンテナ -->
      <div class="relative bg-gray-100 rounded-lg shadow-lg flex justify-center items-center overflow-hidden mx-auto" id="resultContainer">
        <img id="resultImg" src="" alt="" class="w-full h-full object-contain" />

        <!-- 中央テキスト -->
        <div class="absolute inset-0 flex flex-col justify-center items-center text-center px-2">
          <span id="wordText" class="font-bold text-white drop-shadow-lg text-center"></span>
          <span id="hitPercentText" class="font-semibold text-white drop-shadow-lg mt-2 text-center"></span>
        </div>
      </div>
    </div>
  </main>

    <!-- 固定ボタン群テンプレートに変更 -->
    <div class="fixed bottom-20 left-1/2 transform -translate-x-1/2 flex flex-col sm:flex-row gap-3 z-30">
      <!-- ホームボタン -->
      <button
        class="w-40 sm:w-auto px-4 py-2 bg-blue-500/80 text-white font-semibold rounded-lg shadow-lg hover:bg-blue-600/80 transition duration-200 backdrop-blur-sm"
        onclick="location.href='index.html'"
      >
        ホームへ
      </button>

      <!-- 再挑戦ボタン -->
      <button
        class="w-40 sm:w-auto px-4 py-2 bg-red-500/80 text-white font-semibold rounded-lg shadow-lg hover:bg-red-600/80 transition duration-200 backdrop-blur-sm"
        onclick="location.href='game.html'"
      >
        再挑戦へ
      </button>

      <!-- 結果シェアボタン -->
      <button
        class="w-40 sm:w-auto px-4 py-2 bg-green-500/80 text-white font-semibold rounded-lg shadow-lg hover:bg-green-600/80 transition duration-200 backdrop-blur-sm"
        onclick="location.href='result.html'"
      >
        結果をシェア
      </button>
    </div>

  <!-- フッター -->
  <footer class="bg-amber-300/80 w-full shadow-inner p-1 fixed bottom-0 z-20">
    <p class="text-center m-2">@NOA</p>
  </footer>

  <script>
    const resultContainer = document.getElementById('resultContainer');
    const resultImg = document.getElementById("resultImg");
    const wordText = document.getElementById("wordText");
    const hitPercentText = document.getElementById("hitPercentText");

    // URLパラメータ取得
    const params = new URLSearchParams(window.location.search);
    const word = params.get("word") || "不明";
    const hitPercent = params.get("hitPercent") || "0";

    wordText.textContent = word;
    hitPercentText.textContent = `刺さった位置: ${hitPercent}%`;

    // 画像パターン
    const patterns = [
      { regex: /./i, img: "image/result_kabab.png", label: "ケバブ系" },
      { regex: /banana/i, img: "image/banana.png", label: "バナナ系" },
      { regex: /cherry|sakura/i, img: "image/cherry.png", label: "サクランボ系" },
      { regex: /date/i, img: "image/date.png", label: "デーツ系" },
      { regex: /fig/i, img: "image/fig.png", label: "イチジク系" },
      { regex: /grape/i, img: "image/grape.png", label: "ブドウ系" },
    ];

    let matched = patterns.find(p => p.regex.test(word)) || { img: "image/default.png", label: "不明" };
    resultImg.src = matched.img;
    resultImg.alt = matched.label;

    // リサイズ対応＋文字サイズ自動調整
    function resizeContainer() {
      const padding = 32; // 親divのパディング
      const maxWidth = window.innerWidth * 0.7 - padding;
      const maxHeight = (window.innerHeight - 100) * 0.9 - padding; // ヘッダー/フッター考慮
      const size = Math.min(maxWidth, maxHeight);
      resultContainer.style.width = `${size}px`;
      resultContainer.style.height = `${size}px`;

      // Wordの文字サイズ（コンテナサイズの10%）
      let wordFontSize = size * 0.09;
      wordFontSize = Math.max(18, wordFontSize); // 最小18px
      wordText.style.fontSize = `${wordFontSize}px`;

      // 刺さった位置の文字サイズ（Wordより小さく、コンテナサイズの6%）
      let hitFontSize = size * 0.03;
      hitFontSize = Math.max(14, hitFontSize); // 最小14px
      hitPercentText.style.fontSize = `${hitFontSize}px`;
    }

    window.addEventListener('resize', resizeContainer);
    window.addEventListener('load', resizeContainer);
  </script>

</body>
</html>